var f$2=Object.defineProperty;var g$1=(a,b)=>{for(var c in b)f$2(a,c,{get:b[c],enumerable:!0});};var e$1=(a,b,c)=>{if(!b.has(a))throw TypeError("Cannot "+c)};var h$2=(a,b,c)=>(e$1(a,b,"read from private field"),c?c.call(a):b.get(a)),i=(a,b,c)=>{if(b.has(a))throw TypeError("Cannot add the same private member more than once");b instanceof WeakSet?b.add(a):b.set(a,c);},j$1=(a,b,c,d)=>(e$1(a,b,"write to private field"),d?d.call(a,c):b.set(a,c),c);

var f$1={};g$1(f$1,{Channel:()=>a$1,PluginListener:()=>c$1,addPluginListener:()=>v$1,convertFileSrc:()=>m$1,invoke:()=>u$1,transformCallback:()=>o});function h$1(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function o(t,e=!1){let n=h$1(),r=`_${n}`;return Object.defineProperty(window,r,{value:i=>(e&&Reflect.deleteProperty(window,r),t?.(i)),writable:!1,configurable:!0}),n}var s,a$1=class a{constructor(){this.__TAURI_CHANNEL_MARKER__=!0;i(this,s,()=>{});this.id=o(e=>{h$2(this,s).call(this,e);});}set onmessage(e){j$1(this,s,e);}get onmessage(){return h$2(this,s)}toJSON(){return `__CHANNEL__:${this.id}`}};s=new WeakMap;var c$1=class c{constructor(e,n,r){this.plugin=e,this.event=n,this.channelId=r;}async unregister(){return u$1(`plugin:${this.plugin}|remove_listener`,{event:this.event,channelId:this.channelId})}};async function v$1(t,e,n){let r=new a$1;return r.onmessage=n,u$1(`plugin:${t}|register_listener`,{event:e,handler:r}).then(()=>new c$1(t,e,r.id))}async function u$1(t,e={}){return new Promise((n,r)=>{let i=o(d=>{n(d),Reflect.deleteProperty(window,`_${g}`);},!0),g=o(d=>{r(d),Reflect.deleteProperty(window,`_${i}`);},!0);window.__TAURI_IPC__({cmd:t,callback:i,error:g,...e});})}function m$1(t,e="asset"){let n=encodeURIComponent(t);return navigator.userAgent.includes("Windows")?`https://${e}.localhost/${n}`:`${e}://localhost/${n}`}

var O={};g$1(O,{BaseDirectory:()=>e,appCacheDir:()=>p,appConfigDir:()=>u,appDataDir:()=>c,appLocalDataDir:()=>a,appLogDir:()=>V,audioDir:()=>l,basename:()=>H,cacheDir:()=>g,configDir:()=>d,dataDir:()=>m,delimiter:()=>T,desktopDir:()=>y,dirname:()=>E,documentDir:()=>f,downloadDir:()=>h,executableDir:()=>P,extname:()=>F,fontDir:()=>v,homeDir:()=>_,isAbsolute:()=>M,join:()=>z,localDataDir:()=>D,normalize:()=>j,pictureDir:()=>b,publicDir:()=>A,resolve:()=>W,resolveResource:()=>L,resourceDir:()=>C,runtimeDir:()=>x,sep:()=>k,templateDir:()=>R,videoDir:()=>w});function t(){return navigator.appVersion.includes("Win")}var e=(r=>(r[r.Audio=1]="Audio",r[r.Cache=2]="Cache",r[r.Config=3]="Config",r[r.Data=4]="Data",r[r.LocalData=5]="LocalData",r[r.Document=6]="Document",r[r.Download=7]="Download",r[r.Picture=8]="Picture",r[r.Public=9]="Public",r[r.Video=10]="Video",r[r.Resource=11]="Resource",r[r.Temp=12]="Temp",r[r.AppConfig=13]="AppConfig",r[r.AppData=14]="AppData",r[r.AppLocalData=15]="AppLocalData",r[r.AppCache=16]="AppCache",r[r.AppLog=17]="AppLog",r[r.Desktop=18]="Desktop",r[r.Executable=19]="Executable",r[r.Font=20]="Font",r[r.Home=21]="Home",r[r.Runtime=22]="Runtime",r[r.Template=23]="Template",r))(e||{});async function u(){return u$1("plugin:path|resolve_directory",{directory:13})}async function c(){return u$1("plugin:path|resolve_directory",{directory:14})}async function a(){return u$1("plugin:path|resolve_directory",{directory:15})}async function p(){return u$1("plugin:path|resolve_directory",{directory:16})}async function l(){return u$1("plugin:path|resolve_directory",{directory:1})}async function g(){return u$1("plugin:path|resolve_directory",{directory:2})}async function d(){return u$1("plugin:path|resolve_directory",{directory:3})}async function m(){return u$1("plugin:path|resolve_directory",{directory:4})}async function y(){return u$1("plugin:path|resolve_directory",{directory:18})}async function f(){return u$1("plugin:path|resolve_directory",{directory:6})}async function h(){return u$1("plugin:path|resolve_directory",{directory:7})}async function P(){return u$1("plugin:path|resolve_directory",{directory:19})}async function v(){return u$1("plugin:path|resolve_directory",{directory:20})}async function _(){return u$1("plugin:path|resolve_directory",{directory:21})}async function D(){return u$1("plugin:path|resolve_directory",{directory:5})}async function b(){return u$1("plugin:path|resolve_directory",{directory:8})}async function A(){return u$1("plugin:path|resolve_directory",{directory:9})}async function C(){return u$1("plugin:path|resolve_directory",{directory:11})}async function L(i){return u$1("plugin:path|resolve_directory",{directory:11,path:i})}async function x(){return u$1("plugin:path|resolve_directory",{directory:22})}async function R(){return u$1("plugin:path|resolve_directory",{directory:23})}async function w(){return u$1("plugin:path|resolve_directory",{directory:10})}async function V(){return u$1("plugin:path|resolve_directory",{directory:17})}var k=t()?"\\":"/",T=t()?";":":";async function W(...i){return u$1("plugin:path|resolve",{paths:i})}async function j(i){return u$1("plugin:path|normalize",{path:i})}async function z(...i){return u$1("plugin:path|join",{paths:i})}async function E(i){return u$1("plugin:path|dirname",{path:i})}async function F(i){return u$1("plugin:path|extname",{path:i})}async function H(i,o){return u$1("plugin:path|basename",{path:i,ext:o})}async function M(i){return u$1("plugin:path|isAbsolute",{path:i})}

// Copyright 2019-2023 Tauri Programme within The Commons Conservancy
/**
 * Reads a file as an UTF-8 encoded string.
 * @example
 * ```typescript
 * import { readTextFile, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Read the text file in the `$APPCONFIG/app.conf` path
 * const contents = await readTextFile('app.conf', { dir: BaseDirectory.AppConfig });
 * ```
 *
 * @since 1.0.0
 */
async function readTextFile(filePath, options = {}) {
    return await window.__TAURI_INVOKE__("plugin:fs|read_text_file", {
        path: filePath,
        options,
    });
}
/**
 * Reads a file as byte array.
 * @example
 * ```typescript
 * import { readBinaryFile, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Read the image file in the `$RESOURCEDIR/avatar.png` path
 * const contents = await readBinaryFile('avatar.png', { dir: BaseDirectory.Resource });
 * ```
 *
 * @since 1.0.0
 */
async function readBinaryFile(filePath, options = {}) {
    const arr = await window.__TAURI_INVOKE__("plugin:fs|read_file", {
        path: filePath,
        options,
    });
    return Uint8Array.from(arr);
}
/**
 * Writes a UTF-8 text file.
 *
 * @returns A promise indicating the success or failure of the operation.
 *
 * @since 1.0.0
 */
async function writeTextFile(path, contents, options) {
    if (typeof options === "object") {
        Object.freeze(options);
    }
    if (typeof path === "object") {
        Object.freeze(path);
    }
    const file = { path: "", contents: "" };
    let fileOptions = options;
    if (typeof path === "string") {
        file.path = path;
    }
    else {
        file.path = path.path;
        file.contents = path.contents;
    }
    if (typeof contents === "string") {
        file.contents = contents !== null && contents !== void 0 ? contents : "";
    }
    else {
        fileOptions = contents;
    }
    return await window.__TAURI_INVOKE__("plugin:fs|write_file", {
        path: file.path,
        contents: Array.from(new TextEncoder().encode(file.contents)),
        options: fileOptions,
    });
}
/**
 * Writes a byte array content to a file.
 *
 * @returns A promise indicating the success or failure of the operation.
 *
 * @since 1.0.0
 */
async function writeBinaryFile(path, contents, options) {
    if (typeof options === "object") {
        Object.freeze(options);
    }
    if (typeof path === "object") {
        Object.freeze(path);
    }
    const file = { path: "", contents: [] };
    let fileOptions = options;
    if (typeof path === "string") {
        file.path = path;
    }
    else {
        file.path = path.path;
        file.contents = path.contents;
    }
    if (contents && "dir" in contents) {
        fileOptions = contents;
    }
    else if (typeof path === "string") {
        // @ts-expect-error in this case `contents` is always a BinaryFileContents
        file.contents = contents !== null && contents !== void 0 ? contents : [];
    }
    return await window.__TAURI_INVOKE__("plugin:fs|write_binary_file", {
        path: file.path,
        contents: Array.from(file.contents instanceof ArrayBuffer
            ? new Uint8Array(file.contents)
            : file.contents),
        options: fileOptions,
    });
}
/**
 * List directory files.
 * @example
 * ```typescript
 * import { readDir, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Reads the `$APPDATA/users` directory recursively
 * const entries = await readDir('users', { dir: BaseDirectory.AppData, recursive: true });
 *
 * function processEntries(entries) {
 *   for (const entry of entries) {
 *     console.log(`Entry: ${entry.path}`);
 *     if (entry.children) {
 *       processEntries(entry.children)
 *     }
 *   }
 * }
 * ```
 *
 * @since 1.0.0
 */
async function readDir(dir, options = {}) {
    return await window.__TAURI_INVOKE__("plugin:fs|read_dir", {
        path: dir,
        options,
    });
}
/**
 * Creates a directory.
 * If one of the path's parent components doesn't exist
 * and the `recursive` option isn't set to true, the promise will be rejected.
 * @example
 * ```typescript
 * import { createDir, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Create the `$APPDATA/users` directory
 * await createDir('users', { dir: BaseDirectory.AppData, recursive: true });
 * ```
 *
 * @returns A promise indicating the success or failure of the operation.
 *
 * @since 1.0.0
 */
async function createDir(dir, options = {}) {
    return await window.__TAURI_INVOKE__("plugin:fs|create_dir", {
        path: dir,
        options,
    });
}
/**
 * Removes a directory.
 * If the directory is not empty and the `recursive` option isn't set to true, the promise will be rejected.
 * @example
 * ```typescript
 * import { removeDir, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Remove the directory `$APPDATA/users`
 * await removeDir('users', { dir: BaseDirectory.AppData });
 * ```
 *
 * @returns A promise indicating the success or failure of the operation.
 *
 * @since 1.0.0
 */
async function removeDir(dir, options = {}) {
    return await window.__TAURI_INVOKE__("plugin:fs|remove_dir", {
        path: dir,
        options,
    });
}
/**
 * Copies a file to a destination.
 * @example
 * ```typescript
 * import { copyFile, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Copy the `$APPCONFIG/app.conf` file to `$APPCONFIG/app.conf.bk`
 * await copyFile('app.conf', 'app.conf.bk', { dir: BaseDirectory.AppConfig });
 * ```
 *
 * @returns A promise indicating the success or failure of the operation.
 *
 * @since 1.0.0
 */
async function copyFile(source, destination, options = {}) {
    return await window.__TAURI_INVOKE__("plugin:fs|copy_file", {
        source,
        destination,
        options,
    });
}
/**
 * Removes a file.
 * @example
 * ```typescript
 * import { removeFile, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Remove the `$APPConfig/app.conf` file
 * await removeFile('app.conf', { dir: BaseDirectory.AppConfig });
 * ```
 *
 * @returns A promise indicating the success or failure of the operation.
 *
 * @since 1.0.0
 */
async function removeFile(file, options = {}) {
    return await window.__TAURI_INVOKE__("plugin:fs|remove_file", {
        path: file,
        options,
    });
}
/**
 * Renames a file.
 * @example
 * ```typescript
 * import { renameFile, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Rename the `$APPDATA/avatar.png` file
 * await renameFile('avatar.png', 'deleted.png', { dir: BaseDirectory.AppData });
 * ```
 *
 * @returns A promise indicating the success or failure of the operation.
 *
 * @since 1.0.0
 */
async function renameFile(oldPath, newPath, options = {}) {
    return await window.__TAURI_INVOKE__("plugin:fs|rename_file", {
        oldPath,
        newPath,
        options,
    });
}
/**
 * Check if a path exists.
 * @example
 * ```typescript
 * import { exists, BaseDirectory } from '@tauri-apps/plugin-fs';
 * // Check if the `$APPDATA/avatar.png` file exists
 * await exists('avatar.png', { dir: BaseDirectory.AppData });
 * ```
 *
 * @since 1.0.0
 */
async function exists(path) {
    return await window.__TAURI_INVOKE__("plugin:fs|exists", { path });
}
/**
 * Returns the metadata for the given path.
 *
 * @since 1.0.0
 */
async function metadata(path) {
    return await window
        .__TAURI_INVOKE__("plugin:fs|metadata", {
        path,
    })
        .then((metadata) => {
        const { accessedAtMs, createdAtMs, modifiedAtMs, ...data } = metadata;
        return {
            accessedAt: new Date(accessedAtMs),
            createdAt: new Date(createdAtMs),
            modifiedAt: new Date(modifiedAtMs),
            ...data,
        };
    });
}

export { e as BaseDirectory, e as Dir, copyFile, createDir, exists, metadata, readBinaryFile, readDir, readTextFile, removeDir, removeFile, renameFile, writeBinaryFile, writeTextFile as writeFile, writeTextFile };
//# sourceMappingURL=index.min.js.map
